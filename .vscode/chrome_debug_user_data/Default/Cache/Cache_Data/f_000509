import { defineStore } from "/node_modules/.vite/deps/pinia.js?v=4b6b996a";
import { SimpleUser } from "/node_modules/.vite/deps/sip__js_lib_platform_web.js?v=4b6b996a";
import { ref } from "/node_modules/.vite/deps/vue.js?v=4b6b996a";
export const useSipStore = defineStore("sip", () => {
  const simpleUser = ref(null);
  const isConnected = ref(false);
  const isRegistered = ref(false);
  const voicemail = ref({ new: 0, old: 0 });
  const isDnd = ref(false);
  const callState = ref("idle");
  const connectionState = ref("disconnected");
  const callStartTime = ref(null);
  const error = ref(null);
  const isMuted = ref(false);
  const isOnHold = ref(false);
  const audioElement = ref(null);
  const sipConfig = ref({
    server: "wss://hornblower.doesnotexist.com:7443",
    username: "",
    password: "",
    domain: "hornblower.doesnotexist.com",
    displayName: ""
  });
  const createSimpleUserDelegate = () => ({
    onCallCreated: () => {
      console.log("Call created");
      callState.value = "calling";
      callStartTime.value = /* @__PURE__ */ new Date();
    },
    onCallReceived: () => {
      console.log("Call received");
      if (isDnd.value) {
        console.log("Llamada entrante ignorada por DND");
        simpleUser.value?.hangup();
        return;
      }
      callState.value = "ringing";
    },
    onCallAnswered: () => {
      console.log("Call answered");
      callState.value = "connected";
    },
    onCallHangup: () => {
      console.log("Call hangup");
      callState.value = "ended";
      callStartTime.value = null;
      isMuted.value = false;
      isOnHold.value = false;
    },
    onCallHold: (held) => {
      console.log(`Call hold ${held}`);
      isOnHold.value = held;
    },
    onRegistered: () => {
      console.log("Registered");
      isRegistered.value = true;
    },
    onUnregistered: () => {
      console.log("Unregistered");
      isRegistered.value = false;
    },
    onServerConnect: () => {
      console.log("Server connected");
      isConnected.value = true;
      connectionState.value = "connected";
    },
    onServerDisconnect: () => {
      console.log("Server disconnected");
      isConnected.value = false;
      isRegistered.value = false;
      connectionState.value = "disconnected";
      setTimeout(() => {
        if (simpleUser.value && connectionState.value === "disconnected") {
          reconnect();
        }
      }, 5e3);
    }
  });
  const initializeSip = async (config, remoteAudio) => {
    try {
      sipConfig.value = { ...sipConfig.value, ...config };
      if (remoteAudio) {
        audioElement.value = remoteAudio;
      }
      connectionState.value = "connecting";
      error.value = null;
      const webSocketServer = sipConfig.value.server;
      const simpleUserOptions = {
        delegate: createSimpleUserDelegate(),
        media: {
          remote: {
            audio: audioElement.value || void 0
          }
        },
        userAgentOptions: {
          displayName: sipConfig.value.displayName,
          // Configuraciones adicionales del UserAgent
          authorizationUsername: sipConfig.value.username,
          authorizationPassword: sipConfig.value.password,
          uri: `sip:${sipConfig.value.username}@${sipConfig.value.domain}`,
          transportOptions: {
            server: webSocketServer,
            connectionTimeout: 1e4,
            keepAliveInterval: 3e4,
            traceSip: true
          },
          registerExpires: 120,
          allowLegacyNotifications: true,
          hackWssInTransport: true,
          wsServerMaxReconnection: 5e3,
          wsServerReconnectionTimeout: 1,
          connectionRecoveryMaxInterval: 3,
          connectionRecoveryMinInterval: 2
        }
      };
      simpleUser.value = new SimpleUser(webSocketServer, simpleUserOptions);
      await simpleUser.value.connect();
      await simpleUser.value.register();
      return true;
    } catch (err) {
      console.error("Error inicializando SIP:", err);
      error.value = err instanceof Error ? err.message : "Error desconocido";
      connectionState.value = "disconnected";
      return false;
    }
  };
  const reconnect = async () => {
    if (simpleUser.value) {
      connectionState.value = "reconnecting";
      try {
        await simpleUser.value.connect();
        await simpleUser.value.register();
      } catch (err) {
        console.error("Error reconnecting:", err);
        connectionState.value = "disconnected";
      }
    }
  };
  const makeCall = async (number) => {
    try {
      if (!simpleUser.value || !isConnected.value) {
        throw new Error("SIP no estÃ¡ conectado");
      }
      const target = `sip:${number}@${sipConfig.value.domain}`;
      await simpleUser.value.call(target, {
        inviteWithoutSdp: false
      });
      return true;
    } catch (err) {
      console.error("Error haciendo llamada:", err);
      error.value = err instanceof Error ? err.message : "Error en la llamada";
      callState.value = "idle";
      return false;
    }
  };
  const endCall = async () => {
    try {
      if (simpleUser.value) {
        await simpleUser.value.hangup();
      }
    } catch (err) {
      console.error("Error terminando llamada:", err);
      error.value = err instanceof Error ? err.message : "Error terminando llamada";
    }
  };
  const answerCall = async () => {
    try {
      if (simpleUser.value) {
        await simpleUser.value.answer();
      }
    } catch (err) {
      console.error("Error contestando llamada:", err);
      error.value = err instanceof Error ? err.message : "Error contestando llamada";
    }
  };
  const muteCall = () => {
    try {
      if (simpleUser.value) {
        simpleUser.value.mute();
        isMuted.value = simpleUser.value.isMuted();
      }
    } catch (err) {
      console.error("Error muting call:", err);
    }
  };
  const unmuteCall = () => {
    try {
      if (simpleUser.value) {
        simpleUser.value.unmute();
        isMuted.value = simpleUser.value.isMuted();
      }
    } catch (err) {
      console.error("Error unmuting call:", err);
    }
  };
  const toggleMute = () => {
    if (isMuted.value) {
      unmuteCall();
    } else {
      muteCall();
    }
  };
  const holdCall = async () => {
    try {
      if (simpleUser.value) {
        await simpleUser.value.hold();
      }
    } catch (err) {
      console.error("Error holding call:", err);
      error.value = err instanceof Error ? err.message : "Error poniendo en espera";
    }
  };
  const unholdCall = async () => {
    try {
      if (simpleUser.value) {
        await simpleUser.value.unhold();
      }
    } catch (err) {
      console.error("Error unholding call:", err);
      error.value = err instanceof Error ? err.message : "Error quitando de espera";
    }
  };
  const toggleHold = async () => {
    if (isOnHold.value) {
      await unholdCall();
    } else {
      await holdCall();
    }
  };
  const sendDTMF = async (tone) => {
    try {
      if (simpleUser.value) {
        await simpleUser.value.sendDTMF(tone);
      }
    } catch (err) {
      console.error("Error sending DTMF:", err);
      error.value = err instanceof Error ? err.message : "Error enviando DTMF";
    }
  };
  const disconnect = async () => {
    try {
      if (simpleUser.value) {
        await simpleUser.value.disconnect();
      }
      connectionState.value = "disconnected";
      isConnected.value = false;
      isRegistered.value = false;
    } catch (err) {
      console.error("Error disconnecting:", err);
      error.value = err instanceof Error ? err.message : "Error desconectando";
    }
  };
  const setAudioElement = (element) => {
    audioElement.value = element;
  };
  return {
    // State
    simpleUser,
    isRegistered,
    isConnected,
    connectionState,
    error,
    sipConfig,
    voicemail,
    isDnd,
    callState,
    callStartTime,
    isMuted,
    isOnHold,
    // Actions
    initializeSip,
    makeCall,
    endCall,
    answerCall,
    muteCall,
    unmuteCall,
    toggleMute,
    holdCall,
    unholdCall,
    toggleHold,
    sendDTMF,
    disconnect,
    setAudioElement,
    reconnect
  };
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNpcFN0b3JlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmluZVN0b3JlIH0gZnJvbSAncGluaWEnXHJcbmltcG9ydCB7IFNpbXBsZVVzZXIsIHR5cGUgU2ltcGxlVXNlckRlbGVnYXRlLCB0eXBlIFNpbXBsZVVzZXJPcHRpb25zIH0gZnJvbSAnc2lwLmpzL2xpYi9wbGF0Zm9ybS93ZWInXHJcbmltcG9ydCB7IHJlZiB9IGZyb20gJ3Z1ZSdcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VTaXBTdG9yZSA9IGRlZmluZVN0b3JlKCdzaXAnLCAoKSA9PiB7XHJcbiAgLy8gU3RhdGVcclxuICBjb25zdCBzaW1wbGVVc2VyID0gcmVmPFNpbXBsZVVzZXIgfCBudWxsPihudWxsKVxyXG4gIGNvbnN0IGlzQ29ubmVjdGVkID0gcmVmKGZhbHNlKVxyXG4gIGNvbnN0IGlzUmVnaXN0ZXJlZCA9IHJlZihmYWxzZSlcclxuICBjb25zdCB2b2ljZW1haWwgPSByZWYoeyBuZXc6IDAsIG9sZDogMCB9KVxyXG4gIGNvbnN0IGlzRG5kID0gcmVmKGZhbHNlKVxyXG4gIGNvbnN0IGNhbGxTdGF0ZSA9IHJlZjwnaWRsZScgfCAnY2FsbGluZycgfCAncmluZ2luZycgfCAnY29ubmVjdGVkJyB8ICdlbmRlZCc+KCdpZGxlJylcclxuICBjb25zdCBjb25uZWN0aW9uU3RhdGUgPSByZWY8J2Rpc2Nvbm5lY3RlZCcgfCAnY29ubmVjdGluZycgfCAnY29ubmVjdGVkJyB8ICdyZWNvbm5lY3RpbmcnPignZGlzY29ubmVjdGVkJylcclxuICBjb25zdCBjYWxsU3RhcnRUaW1lID0gcmVmPERhdGUgfCBudWxsPihudWxsKVxyXG4gIGNvbnN0IGVycm9yID0gcmVmPHN0cmluZyB8IG51bGw+KG51bGwpXHJcbiAgY29uc3QgaXNNdXRlZCA9IHJlZihmYWxzZSlcclxuICBjb25zdCBpc09uSG9sZCA9IHJlZihmYWxzZSlcclxuXHJcbiAgLy8gQXVkaW8gZWxlbWVudCByZWZlcmVuY2UgLSBlc3RvIGRlYmVyw61hIHNlciBwcm9wb3JjaW9uYWRvIGRlc2RlIGVsIGNvbXBvbmVudGVcclxuICBjb25zdCBhdWRpb0VsZW1lbnQgPSByZWY8SFRNTEF1ZGlvRWxlbWVudCB8IG51bGw+KG51bGwpXHJcblxyXG4gIGNvbnN0IHNpcENvbmZpZyA9IHJlZih7XHJcbiAgICBzZXJ2ZXI6ICd3c3M6Ly9ob3JuYmxvd2VyLmRvZXNub3RleGlzdC5jb206NzQ0MycsXHJcbiAgICB1c2VybmFtZTogJycsXHJcbiAgICBwYXNzd29yZDogJycsXHJcbiAgICBkb21haW46ICdob3JuYmxvd2VyLmRvZXNub3RleGlzdC5jb20nLFxyXG4gICAgZGlzcGxheU5hbWU6ICcnLFxyXG4gIH0pXHJcblxyXG4gIC8vIFNpbXBsZVVzZXIgZGVsZWdhdGUgcGFyYSBtYW5lamFyIGV2ZW50b3NcclxuICBjb25zdCBjcmVhdGVTaW1wbGVVc2VyRGVsZWdhdGUgPSAoKTogU2ltcGxlVXNlckRlbGVnYXRlID0+ICh7XHJcbiAgICBvbkNhbGxDcmVhdGVkOiAoKTogdm9pZCA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdDYWxsIGNyZWF0ZWQnKVxyXG4gICAgICBjYWxsU3RhdGUudmFsdWUgPSAnY2FsbGluZydcclxuICAgICAgY2FsbFN0YXJ0VGltZS52YWx1ZSA9IG5ldyBEYXRlKClcclxuICAgIH0sXHJcbiAgICBvbkNhbGxSZWNlaXZlZDogKCk6IHZvaWQgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnQ2FsbCByZWNlaXZlZCcpXHJcbiAgICAgIGlmIChpc0RuZC52YWx1ZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdMbGFtYWRhIGVudHJhbnRlIGlnbm9yYWRhIHBvciBETkQnKVxyXG4gICAgICAgIHNpbXBsZVVzZXIudmFsdWU/Lmhhbmd1cCgpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuICAgICAgY2FsbFN0YXRlLnZhbHVlID0gJ3JpbmdpbmcnXHJcbiAgICB9LFxyXG4gICAgb25DYWxsQW5zd2VyZWQ6ICgpOiB2b2lkID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ0NhbGwgYW5zd2VyZWQnKVxyXG4gICAgICBjYWxsU3RhdGUudmFsdWUgPSAnY29ubmVjdGVkJ1xyXG4gICAgfSxcclxuICAgIG9uQ2FsbEhhbmd1cDogKCk6IHZvaWQgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnQ2FsbCBoYW5ndXAnKVxyXG4gICAgICBjYWxsU3RhdGUudmFsdWUgPSAnZW5kZWQnXHJcbiAgICAgIGNhbGxTdGFydFRpbWUudmFsdWUgPSBudWxsXHJcbiAgICAgIGlzTXV0ZWQudmFsdWUgPSBmYWxzZVxyXG4gICAgICBpc09uSG9sZC52YWx1ZSA9IGZhbHNlXHJcbiAgICB9LFxyXG4gICAgb25DYWxsSG9sZDogKGhlbGQ6IGJvb2xlYW4pOiB2b2lkID0+IHtcclxuICAgICAgY29uc29sZS5sb2coYENhbGwgaG9sZCAke2hlbGR9YClcclxuICAgICAgaXNPbkhvbGQudmFsdWUgPSBoZWxkXHJcbiAgICB9LFxyXG4gICAgb25SZWdpc3RlcmVkOiAoKTogdm9pZCA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdSZWdpc3RlcmVkJylcclxuICAgICAgaXNSZWdpc3RlcmVkLnZhbHVlID0gdHJ1ZVxyXG4gICAgfSxcclxuICAgIG9uVW5yZWdpc3RlcmVkOiAoKTogdm9pZCA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdVbnJlZ2lzdGVyZWQnKVxyXG4gICAgICBpc1JlZ2lzdGVyZWQudmFsdWUgPSBmYWxzZVxyXG4gICAgfSxcclxuICAgIG9uU2VydmVyQ29ubmVjdDogKCk6IHZvaWQgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnU2VydmVyIGNvbm5lY3RlZCcpXHJcbiAgICAgIGlzQ29ubmVjdGVkLnZhbHVlID0gdHJ1ZVxyXG4gICAgICBjb25uZWN0aW9uU3RhdGUudmFsdWUgPSAnY29ubmVjdGVkJ1xyXG4gICAgfSxcclxuICAgIG9uU2VydmVyRGlzY29ubmVjdDogKCk6IHZvaWQgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnU2VydmVyIGRpc2Nvbm5lY3RlZCcpXHJcbiAgICAgIGlzQ29ubmVjdGVkLnZhbHVlID0gZmFsc2VcclxuICAgICAgaXNSZWdpc3RlcmVkLnZhbHVlID0gZmFsc2VcclxuICAgICAgY29ubmVjdGlvblN0YXRlLnZhbHVlID0gJ2Rpc2Nvbm5lY3RlZCdcclxuICAgICAgXHJcbiAgICAgIC8vIEF1dG8tcmVjb25uZWN0IGRlc3B1w6lzIGRlIDUgc2VndW5kb3NcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKHNpbXBsZVVzZXIudmFsdWUgJiYgY29ubmVjdGlvblN0YXRlLnZhbHVlID09PSAnZGlzY29ubmVjdGVkJykge1xyXG4gICAgICAgICAgcmVjb25uZWN0KClcclxuICAgICAgICB9XHJcbiAgICAgIH0sIDUwMDApXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgY29uc3QgaW5pdGlhbGl6ZVNpcCA9IGFzeW5jIChcclxuICAgIGNvbmZpZzoge1xyXG4gICAgICBzZXJ2ZXI6IHN0cmluZ1xyXG4gICAgICB1c2VybmFtZTogc3RyaW5nXHJcbiAgICAgIHBhc3N3b3JkOiBzdHJpbmdcclxuICAgICAgZG9tYWluOiBzdHJpbmdcclxuICAgICAgZGlzcGxheU5hbWU6IHN0cmluZ1xyXG4gICAgfSxcclxuICAgIHJlbW90ZUF1ZGlvPzogSFRNTEF1ZGlvRWxlbWVudFxyXG4gICk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQWN0dWFsaXphciBjb25maWd1cmFjacOzblxyXG4gICAgICBzaXBDb25maWcudmFsdWUgPSB7IC4uLnNpcENvbmZpZy52YWx1ZSwgLi4uY29uZmlnIH1cclxuICAgICAgXHJcbiAgICAgIGlmIChyZW1vdGVBdWRpbykge1xyXG4gICAgICAgIGF1ZGlvRWxlbWVudC52YWx1ZSA9IHJlbW90ZUF1ZGlvXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbm5lY3Rpb25TdGF0ZS52YWx1ZSA9ICdjb25uZWN0aW5nJ1xyXG4gICAgICBlcnJvci52YWx1ZSA9IG51bGxcclxuXHJcbiAgICAgIC8vIENvbnN0cnVpciBVUkkgZGVsIHNlcnZpZG9yXHJcbiAgICAgIGNvbnN0IHdlYlNvY2tldFNlcnZlciA9IHNpcENvbmZpZy52YWx1ZS5zZXJ2ZXJcclxuXHJcbiAgICAgIC8vIFNpbXBsZVVzZXIgb3B0aW9uc1xyXG4gICAgICBjb25zdCBzaW1wbGVVc2VyT3B0aW9uczogU2ltcGxlVXNlck9wdGlvbnMgPSB7XHJcbiAgICAgICAgZGVsZWdhdGU6IGNyZWF0ZVNpbXBsZVVzZXJEZWxlZ2F0ZSgpLFxyXG4gICAgICAgIG1lZGlhOiB7XHJcbiAgICAgICAgICByZW1vdGU6IHtcclxuICAgICAgICAgICAgYXVkaW86IGF1ZGlvRWxlbWVudC52YWx1ZSB8fCB1bmRlZmluZWRcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHVzZXJBZ2VudE9wdGlvbnM6IHtcclxuICAgICAgICAgIGRpc3BsYXlOYW1lOiBzaXBDb25maWcudmFsdWUuZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAvLyBDb25maWd1cmFjaW9uZXMgYWRpY2lvbmFsZXMgZGVsIFVzZXJBZ2VudFxyXG4gICAgICAgICAgYXV0aG9yaXphdGlvblVzZXJuYW1lOiBzaXBDb25maWcudmFsdWUudXNlcm5hbWUsXHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uUGFzc3dvcmQ6IHNpcENvbmZpZy52YWx1ZS5wYXNzd29yZCxcclxuICAgICAgICAgIHVyaTogYHNpcDoke3NpcENvbmZpZy52YWx1ZS51c2VybmFtZX1AJHtzaXBDb25maWcudmFsdWUuZG9tYWlufWAsXHJcbiAgICAgICAgICB0cmFuc3BvcnRPcHRpb25zOiB7XHJcbiAgICAgICAgICAgIHNlcnZlcjogd2ViU29ja2V0U2VydmVyLFxyXG4gICAgICAgICAgICBjb25uZWN0aW9uVGltZW91dDogMTAwMDAsXHJcbiAgICAgICAgICAgIGtlZXBBbGl2ZUludGVydmFsOiAzMDAwMCxcclxuICAgICAgICAgICAgdHJhY2VTaXA6IHRydWUsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmVnaXN0ZXJFeHBpcmVzOiAxMjAsXHJcbiAgICAgICAgICBhbGxvd0xlZ2FjeU5vdGlmaWNhdGlvbnM6IHRydWUsXHJcbiAgICAgICAgICBoYWNrV3NzSW5UcmFuc3BvcnQ6IHRydWUsXHJcbiAgICAgICAgICB3c1NlcnZlck1heFJlY29ubmVjdGlvbjogNTAwMCxcclxuICAgICAgICAgIHdzU2VydmVyUmVjb25uZWN0aW9uVGltZW91dDogMSxcclxuICAgICAgICAgIGNvbm5lY3Rpb25SZWNvdmVyeU1heEludGVydmFsOiAzLFxyXG4gICAgICAgICAgY29ubmVjdGlvblJlY292ZXJ5TWluSW50ZXJ2YWw6IDIsXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDcmVhciBTaW1wbGVVc2VyXHJcbiAgICAgIHNpbXBsZVVzZXIudmFsdWUgPSBuZXcgU2ltcGxlVXNlcih3ZWJTb2NrZXRTZXJ2ZXIsIHNpbXBsZVVzZXJPcHRpb25zKVxyXG5cclxuICAgICAgLy8gQ29uZWN0YXJcclxuICAgICAgYXdhaXQgc2ltcGxlVXNlci52YWx1ZS5jb25uZWN0KClcclxuICAgICAgXHJcbiAgICAgIC8vIFJlZ2lzdHJhciBhdXRvbcOhdGljYW1lbnRlIGRlc3B1w6lzIGRlIGNvbmVjdGFyXHJcbiAgICAgIGF3YWl0IHNpbXBsZVVzZXIudmFsdWUucmVnaXN0ZXIoKVxyXG5cclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbmljaWFsaXphbmRvIFNJUDonLCBlcnIpXHJcbiAgICAgIGVycm9yLnZhbHVlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdFcnJvciBkZXNjb25vY2lkbydcclxuICAgICAgY29ubmVjdGlvblN0YXRlLnZhbHVlID0gJ2Rpc2Nvbm5lY3RlZCdcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCByZWNvbm5lY3QgPSBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICBpZiAoc2ltcGxlVXNlci52YWx1ZSkge1xyXG4gICAgICBjb25uZWN0aW9uU3RhdGUudmFsdWUgPSAncmVjb25uZWN0aW5nJ1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNpbXBsZVVzZXIudmFsdWUuY29ubmVjdCgpXHJcbiAgICAgICAgYXdhaXQgc2ltcGxlVXNlci52YWx1ZS5yZWdpc3RlcigpXHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlY29ubmVjdGluZzonLCBlcnIpXHJcbiAgICAgICAgY29ubmVjdGlvblN0YXRlLnZhbHVlID0gJ2Rpc2Nvbm5lY3RlZCdcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgbWFrZUNhbGwgPSBhc3luYyAobnVtYmVyOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghc2ltcGxlVXNlci52YWx1ZSB8fCAhaXNDb25uZWN0ZWQudmFsdWUpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NJUCBubyBlc3TDoSBjb25lY3RhZG8nKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB0YXJnZXQgPSBgc2lwOiR7bnVtYmVyfUAke3NpcENvbmZpZy52YWx1ZS5kb21haW59YFxyXG4gICAgICBcclxuICAgICAgYXdhaXQgc2ltcGxlVXNlci52YWx1ZS5jYWxsKHRhcmdldCwge1xyXG4gICAgICAgIGludml0ZVdpdGhvdXRTZHA6IGZhbHNlXHJcbiAgICAgIH0pXHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGhhY2llbmRvIGxsYW1hZGE6JywgZXJyKVxyXG4gICAgICBlcnJvci52YWx1ZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRXJyb3IgZW4gbGEgbGxhbWFkYSdcclxuICAgICAgY2FsbFN0YXRlLnZhbHVlID0gJ2lkbGUnXHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgZW5kQ2FsbCA9IGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChzaW1wbGVVc2VyLnZhbHVlKSB7XHJcbiAgICAgICAgYXdhaXQgc2ltcGxlVXNlci52YWx1ZS5oYW5ndXAoKVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdGVybWluYW5kbyBsbGFtYWRhOicsIGVycilcclxuICAgICAgZXJyb3IudmFsdWUgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0Vycm9yIHRlcm1pbmFuZG8gbGxhbWFkYSdcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IGFuc3dlckNhbGwgPSBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoc2ltcGxlVXNlci52YWx1ZSkge1xyXG4gICAgICAgIGF3YWl0IHNpbXBsZVVzZXIudmFsdWUuYW5zd2VyKClcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbnRlc3RhbmRvIGxsYW1hZGE6JywgZXJyKVxyXG4gICAgICBlcnJvci52YWx1ZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRXJyb3IgY29udGVzdGFuZG8gbGxhbWFkYSdcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IG11dGVDYWxsID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHNpbXBsZVVzZXIudmFsdWUpIHtcclxuICAgICAgICBzaW1wbGVVc2VyLnZhbHVlLm11dGUoKVxyXG4gICAgICAgIGlzTXV0ZWQudmFsdWUgPSBzaW1wbGVVc2VyLnZhbHVlLmlzTXV0ZWQoKVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbXV0aW5nIGNhbGw6JywgZXJyKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgdW5tdXRlQ2FsbCA9ICgpOiB2b2lkID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChzaW1wbGVVc2VyLnZhbHVlKSB7XHJcbiAgICAgICAgc2ltcGxlVXNlci52YWx1ZS51bm11dGUoKVxyXG4gICAgICAgIGlzTXV0ZWQudmFsdWUgPSBzaW1wbGVVc2VyLnZhbHVlLmlzTXV0ZWQoKVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdW5tdXRpbmcgY2FsbDonLCBlcnIpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCB0b2dnbGVNdXRlID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgaWYgKGlzTXV0ZWQudmFsdWUpIHtcclxuICAgICAgdW5tdXRlQ2FsbCgpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBtdXRlQ2FsbCgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBob2xkQ2FsbCA9IGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChzaW1wbGVVc2VyLnZhbHVlKSB7XHJcbiAgICAgICAgYXdhaXQgc2ltcGxlVXNlci52YWx1ZS5ob2xkKClcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGhvbGRpbmcgY2FsbDonLCBlcnIpXHJcbiAgICAgIGVycm9yLnZhbHVlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdFcnJvciBwb25pZW5kbyBlbiBlc3BlcmEnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCB1bmhvbGRDYWxsID0gYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHNpbXBsZVVzZXIudmFsdWUpIHtcclxuICAgICAgICBhd2FpdCBzaW1wbGVVc2VyLnZhbHVlLnVuaG9sZCgpXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1bmhvbGRpbmcgY2FsbDonLCBlcnIpXHJcbiAgICAgIGVycm9yLnZhbHVlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdFcnJvciBxdWl0YW5kbyBkZSBlc3BlcmEnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCB0b2dnbGVIb2xkID0gYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgaWYgKGlzT25Ib2xkLnZhbHVlKSB7XHJcbiAgICAgIGF3YWl0IHVuaG9sZENhbGwoKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXdhaXQgaG9sZENhbGwoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2VuZERUTUYgPSBhc3luYyAodG9uZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoc2ltcGxlVXNlci52YWx1ZSkge1xyXG4gICAgICAgIGF3YWl0IHNpbXBsZVVzZXIudmFsdWUuc2VuZERUTUYodG9uZSlcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgRFRNRjonLCBlcnIpXHJcbiAgICAgIGVycm9yLnZhbHVlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdFcnJvciBlbnZpYW5kbyBEVE1GJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgZGlzY29ubmVjdCA9IGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChzaW1wbGVVc2VyLnZhbHVlKSB7XHJcbiAgICAgICAgYXdhaXQgc2ltcGxlVXNlci52YWx1ZS5kaXNjb25uZWN0KClcclxuICAgICAgfVxyXG4gICAgICBjb25uZWN0aW9uU3RhdGUudmFsdWUgPSAnZGlzY29ubmVjdGVkJ1xyXG4gICAgICBpc0Nvbm5lY3RlZC52YWx1ZSA9IGZhbHNlXHJcbiAgICAgIGlzUmVnaXN0ZXJlZC52YWx1ZSA9IGZhbHNlXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGlzY29ubmVjdGluZzonLCBlcnIpXHJcbiAgICAgIGVycm9yLnZhbHVlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdFcnJvciBkZXNjb25lY3RhbmRvJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2V0QXVkaW9FbGVtZW50ID0gKGVsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQpOiB2b2lkID0+IHtcclxuICAgIGF1ZGlvRWxlbWVudC52YWx1ZSA9IGVsZW1lbnRcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICAvLyBTdGF0ZVxyXG4gICAgc2ltcGxlVXNlcixcclxuICAgIGlzUmVnaXN0ZXJlZCxcclxuICAgIGlzQ29ubmVjdGVkLFxyXG4gICAgY29ubmVjdGlvblN0YXRlLFxyXG4gICAgZXJyb3IsXHJcbiAgICBzaXBDb25maWcsXHJcbiAgICB2b2ljZW1haWwsXHJcbiAgICBpc0RuZCxcclxuICAgIGNhbGxTdGF0ZSxcclxuICAgIGNhbGxTdGFydFRpbWUsXHJcbiAgICBpc011dGVkLFxyXG4gICAgaXNPbkhvbGQsXHJcbiAgICBcclxuICAgIC8vIEFjdGlvbnNcclxuICAgIGluaXRpYWxpemVTaXAsXHJcbiAgICBtYWtlQ2FsbCxcclxuICAgIGVuZENhbGwsXHJcbiAgICBhbnN3ZXJDYWxsLFxyXG4gICAgbXV0ZUNhbGwsXHJcbiAgICB1bm11dGVDYWxsLFxyXG4gICAgdG9nZ2xlTXV0ZSxcclxuICAgIGhvbGRDYWxsLFxyXG4gICAgdW5ob2xkQ2FsbCxcclxuICAgIHRvZ2dsZUhvbGQsXHJcbiAgICBzZW5kRFRNRixcclxuICAgIGRpc2Nvbm5lY3QsXHJcbiAgICBzZXRBdWRpb0VsZW1lbnQsXHJcbiAgICByZWNvbm5lY3RcclxuICB9XHJcbn0pIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTLG1CQUFtQjtBQUM1QixTQUFTLGtCQUFtRTtBQUM1RSxTQUFTLFdBQVc7QUFFYixhQUFNLGNBQWMsWUFBWSxPQUFPLE1BQU07QUFFbEQsUUFBTSxhQUFhLElBQXVCLElBQUk7QUFDOUMsUUFBTSxjQUFjLElBQUksS0FBSztBQUM3QixRQUFNLGVBQWUsSUFBSSxLQUFLO0FBQzlCLFFBQU0sWUFBWSxJQUFJLEVBQUUsS0FBSyxHQUFHLEtBQUssRUFBRSxDQUFDO0FBQ3hDLFFBQU0sUUFBUSxJQUFJLEtBQUs7QUFDdkIsUUFBTSxZQUFZLElBQTRELE1BQU07QUFDcEYsUUFBTSxrQkFBa0IsSUFBa0UsY0FBYztBQUN4RyxRQUFNLGdCQUFnQixJQUFpQixJQUFJO0FBQzNDLFFBQU0sUUFBUSxJQUFtQixJQUFJO0FBQ3JDLFFBQU0sVUFBVSxJQUFJLEtBQUs7QUFDekIsUUFBTSxXQUFXLElBQUksS0FBSztBQUcxQixRQUFNLGVBQWUsSUFBNkIsSUFBSTtBQUV0RCxRQUFNLFlBQVksSUFBSTtBQUFBLElBQ3BCLFFBQVE7QUFBQSxJQUNSLFVBQVU7QUFBQSxJQUNWLFVBQVU7QUFBQSxJQUNWLFFBQVE7QUFBQSxJQUNSLGFBQWE7QUFBQSxFQUNmLENBQUM7QUFHRCxRQUFNLDJCQUEyQixPQUEyQjtBQUFBLElBQzFELGVBQWUsTUFBWTtBQUN6QixjQUFRLElBQUksY0FBYztBQUMxQixnQkFB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
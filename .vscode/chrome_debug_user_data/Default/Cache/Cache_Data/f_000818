import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/@fs/C:\\respos\\AlmaPhone\\src\\components\\login\\AdvancedOptionsModal.vue");import { defineComponent as _defineComponent } from "/node_modules/.vite/deps/vue.js?v=525c12ea";
import { ref, computed, watch } from "/node_modules/.vite/deps/vue.js?v=525c12ea";
import { useSipStore } from "/src/components/login/SipStore.ts";
import FloatLabel from "/node_modules/.vite/deps/primevue_floatlabel.js?v=525c12ea";
import InputText from "/node_modules/.vite/deps/primevue_inputtext.js?v=525c12ea";
import InputNumber from "/node_modules/.vite/deps/primevue_inputnumber.js?v=525c12ea";
import Button from "/node_modules/.vite/deps/primevue_button.js?v=525c12ea";
import Message from "/node_modules/.vite/deps/primevue_message.js?v=525c12ea";
import BaseModal from "/src/core/presentation/components/BaseModal.vue";
const _sfc_main = /* @__PURE__ */ _defineComponent({
  __name: "AdvancedOptionsModal",
  props: {
    isOpen: { type: Boolean, required: true }
  },
  emits: ["close", "saved"],
  setup(__props, { expose: __expose, emit: __emit }) {
    __expose();
    const props = __props;
    const emit = __emit;
    const sipStore = useSipStore();
    const error = ref(null);
    const form = ref({
      sipDomain: sipStore.sipConfig.domain,
      wssProxy: sipStore.sipConfig.server.replace(/^wss:\/\//, "").replace(/:\d+$/, ""),
      wssPort: parseInt(sipStore.sipConfig.server.replace(/^wss:\/\/.*:/, "")) || DEFAULT_CONFIG.wssPort
    });
    const isValidDomain = (domain) => {
      if (!domain) return false;
      const domainRegex = /^[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]?(\.[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]?)*$/;
      return domainRegex.test(domain);
    };
    const isValidHost = (host) => {
      if (!host) return false;
      const ipRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
      const hostnameRegex = /^[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]?(\.[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]?)*$/;
      return ipRegex.test(host) || hostnameRegex.test(host);
    };
    const isValidPort = (port) => {
      return port !== null && port >= 1 && port <= 65535;
    };
    const isFormValid = computed(() => {
      return isValidDomain(form.value.sipDomain) && isValidHost(form.value.wssProxy) && isValidPort(form.value.wssPort);
    });
    const handleSave = () => {
      if (!isFormValid.value) {
        error.value = "Por favor, corrige los campos marcados en rojo";
        return;
      }
      try {
        sipStore.updateAdvancedConfig({
          domain: form.value.sipDomain,
          server: `wss://${form.value.wssProxy}:${form.value.wssPort}`
        });
        emit("saved");
        emit("close");
      } catch {
        error.value = "Error al guardar la configuraciÃ³n";
      }
    };
    const handleCancel = () => {
      form.value = {
        sipDomain: sipStore.sipConfig.domain,
        wssProxy: sipStore.sipConfig.server.replace(/^wss:\/\//, "").replace(/:\d+$/, ""),
        wssPort: parseInt(sipStore.sipConfig.server.replace(/^wss:\/\/.*:/, "")) || DEFAULT_CONFIG.wssPort
      };
      error.value = null;
      emit("close");
    };
    const handleResetDefaults = () => {
      form.value = { ...DEFAULT_CONFIG };
      error.value = null;
    };
    watch(() => props.isOpen, (isOpen) => {
      if (isOpen) {
        form.value = {
          sipDomain: sipStore.sipConfig.domain,
          wssProxy: sipStore.sipConfig.server.replace(/^wss:\/\//, "").replace(/:\d+$/, ""),
          wssPort: parseInt(sipStore.sipConfig.server.replace(/^wss:\/\/.*:/, "")) || DEFAULT_CONFIG.wssPort
        };
        error.value = null;
      }
    });
    const __returned__ = { props, emit, sipStore, error, form, isValidDomain, isValidHost, isValidPort, isFormValid, handleSave, handleCancel, handleResetDefaults, get FloatLabel() {
      return FloatLabel;
    }, get InputText() {
      return InputText;
    }, get InputNumber() {
      return InputNumber;
    }, get Button() {
      return Button;
    }, get Message() {
      return Message;
    }, BaseModal };
    Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
    return __returned__;
  }
});
import { createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers } from "/node_modules/.vite/deps/vue.js?v=525c12ea";
const _hoisted_1 = { class: "grid grid-cols-1 gap-4" };
const _hoisted_2 = { class: "flex justify-end gap-2 pt-4" };
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return _openBlock(), _createBlock($setup["BaseModal"], {
    isOpen: $props.isOpen,
    title: "Opciones Avanzadas",
    size: "lg",
    onClose: _cache[4] || (_cache[4] = ($event) => _ctx.$emit("close"))
  }, {
    default: _withCtx(() => [
      _createElementVNode(
        "form",
        {
          onSubmit: _withModifiers($setup.handleSave, ["prevent"]),
          class: "space-y-4"
        },
        [
          _createElementVNode("div", _hoisted_1, [
            _createVNode($setup["FloatLabel"], null, {
              default: _withCtx(() => [
                _createVNode($setup["InputText"], {
                  id: "sipDomain",
                  modelValue: $setup.form.sipDomain,
                  "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.form.sipDomain = $event),
                  class: "w-full",
                  invalid: !$setup.isValidDomain($setup.form.sipDomain)
                }, null, 8, ["modelValue", "invalid"]),
                _cache[5] || (_cache[5] = _createElementVNode(
                  "label",
                  { for: "sipDomain" },
                  "SIP Domain Name",
                  -1
                  /* CACHED */
                ))
              ]),
              _: 1,
              __: [5]
            }),
            _createVNode($setup["FloatLabel"], null, {
              default: _withCtx(() => [
                _createVNode($setup["InputText"], {
                  id: "wssProxy",
                  modelValue: $setup.form.wssProxy,
                  "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.form.wssProxy = $event),
                  class: "w-full",
                  invalid: !$setup.isValidHost($setup.form.wssProxy)
                }, null, 8, ["modelValue", "invalid"]),
                _cache[6] || (_cache[6] = _createElementVNode(
                  "label",
                  { for: "wssProxy" },
                  "WSS Proxy Name",
                  -1
                  /* CACHED */
                ))
              ]),
              _: 1,
              __: [6]
            }),
            _createVNode($setup["FloatLabel"], null, {
              default: _withCtx(() => [
                _createVNode($setup["InputNumber"], {
                  id: "wssPort",
                  modelValue: $setup.form.wssPort,
                  "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.form.wssPort = $event),
                  min: 1,
                  max: 65535,
                  class: "w-full",
                  invalid: !$setup.isValidPort($setup.form.wssPort)
                }, null, 8, ["modelValue", "invalid"]),
                _cache[7] || (_cache[7] = _createElementVNode(
                  "label",
                  { for: "wssPort" },
                  "WSS Proxy Port",
                  -1
                  /* CACHED */
                ))
              ]),
              _: 1,
              __: [7]
            })
          ]),
          $setup.error ? (_openBlock(), _createBlock($setup["Message"], {
            key: 0,
            severity: "error",
            closable: true,
            onClose: _cache[3] || (_cache[3] = ($event) => $setup.error = null)
          }, {
            default: _withCtx(() => [
              _createTextVNode(
                _toDisplayString($setup.error),
                1
                /* TEXT */
              )
            ]),
            _: 1
            /* STABLE */
          })) : _createCommentVNode("v-if", true),
          _createElementVNode("div", _hoisted_2, [
            _createVNode($setup["Button"], {
              type: "button",
              label: "Cancelar",
              severity: "secondary",
              onClick: $setup.handleCancel
            }),
            _createVNode($setup["Button"], {
              type: "button",
              label: "Restaurar Defaults",
              severity: "help",
              onClick: $setup.handleResetDefaults
            }),
            _createVNode($setup["Button"], {
              type: "submit",
              label: "Guardar",
              disabled: !$setup.isFormValid
            }, null, 8, ["disabled"])
          ])
        ],
        32
        /* NEED_HYDRATION */
      )
    ]),
    _: 1
    /* STABLE */
  }, 8, ["isOpen"]);
}
_sfc_main.__hmrId = "db88199b";
typeof __VUE_HMR_RUNTIME__ !== "undefined" && __VUE_HMR_RUNTIME__.createRecord(_sfc_main.__hmrId, _sfc_main);
import.meta.hot.on("file-changed", ({ file }) => {
  __VUE_HMR_RUNTIME__.CHANGED_FILE = file;
});
import.meta.hot.accept((mod) => {
  if (!mod) return;
  const { default: updated, _rerender_only } = mod;
  if (_rerender_only) {
    __VUE_HMR_RUNTIME__.rerender(updated.__hmrId, updated.render);
  } else {
    __VUE_HMR_RUNTIME__.reload(updated.__hmrId, updated);
  }
});
import _export_sfc from "/@id/__x00__plugin-vue:export-helper";
export default /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render], ["__file", "C:/respos/AlmaPhone/src/components/login/AdvancedOptionsModal.vue"]]);

//# sourceMappingURL=data:application/json;base64,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QUFPO0FBQUE7MENBRXJDO0FBQUEsa0JBQTJDO0FBQUEsb0JBQXBDLEtBQUksVUFBUztBQUFBLGtCQUFDO0FBQUEsa0JBQWM7QUFBQTtBQUFBO0FBQUE7Ozs7O1VBSy9CLDhCQURSLGFBT1U7QUFBQTtZQUxSLFVBQVM7QUFBQSxZQUNSLFVBQVU7QUFBQSxZQUNWLFNBQUssc0NBQUUsZUFBSztBQUFBOzhCQUViLE1BQVc7QUFBQTtpQ0FBUixZQUFLO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7VUFHVixvQkFrQk0sT0FsQk4sWUFrQk07QUFBQSxZQWpCSixhQUtFO0FBQUEsY0FKQSxNQUFLO0FBQUEsY0FDTCxPQUFNO0FBQUEsY0FDTixVQUFTO0FBQUEsY0FDUixTQUFPO0FBQUE7WUFFVixhQUtFO0FBQUEsY0FKQSxNQUFLO0FBQUEsY0FDTCxPQUFNO0FBQUEsY0FDTixVQUFTO0FBQUEsY0FDUixTQUFPO0FBQUE7WUFFVixhQUlFO0FBQUEsY0FIQSxNQUFLO0FBQUEsY0FDTCxPQUFNO0FBQUEsY0FDTCxVQUFRLENBQUc7QUFBQSIsIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiQWR2YW5jZWRPcHRpb25zTW9kYWwudnVlIl0sInNvdXJjZXNDb250ZW50IjpbIjx0ZW1wbGF0ZT5cclxuICA8QmFzZU1vZGFsXHJcbiAgICA6aXNPcGVuPVwiaXNPcGVuXCJcclxuICAgIHRpdGxlPVwiT3BjaW9uZXMgQXZhbnphZGFzXCJcclxuICAgIHNpemU9XCJsZ1wiXHJcbiAgICBAY2xvc2U9XCIkZW1pdCgnY2xvc2UnKVwiXHJcbiAgPlxyXG4gICAgPGZvcm0gQHN1Ym1pdC5wcmV2ZW50PVwiaGFuZGxlU2F2ZVwiIGNsYXNzPVwic3BhY2UteS00XCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJncmlkIGdyaWQtY29scy0xIGdhcC00XCI+XHJcbiAgICAgICAgPEZsb2F0TGFiZWw+XHJcbiAgICAgICAgICA8SW5wdXRUZXh0XHJcbiAgICAgICAgICAgIGlkPVwic2lwRG9tYWluXCJcclxuICAgICAgICAgICAgdi1tb2RlbD1cImZvcm0uc2lwRG9tYWluXCJcclxuICAgICAgICAgICAgY2xhc3M9XCJ3LWZ1bGxcIlxyXG4gICAgICAgICAgICA6aW52YWxpZD1cIiFpc1ZhbGlkRG9tYWluKGZvcm0uc2lwRG9tYWluKVwiXHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAgPGxhYmVsIGZvcj1cInNpcERvbWFpblwiPlNJUCBEb21haW4gTmFtZTwvbGFiZWw+XHJcbiAgICAgICAgPC9GbG9hdExhYmVsPlxyXG5cclxuICAgICAgICA8RmxvYXRMYWJlbD5cclxuICAgICAgICAgIDxJbnB1dFRleHRcclxuICAgICAgICAgICAgaWQ9XCJ3c3NQcm94eVwiXHJcbiAgICAgICAgICAgIHYtbW9kZWw9XCJmb3JtLndzc1Byb3h5XCJcclxuICAgICAgICAgICAgY2xhc3M9XCJ3LWZ1bGxcIlxyXG4gICAgICAgICAgICA6aW52YWxpZD1cIiFpc1ZhbGlkSG9zdChmb3JtLndzc1Byb3h5KVwiXHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAgPGxhYmVsIGZvcj1cIndzc1Byb3h5XCI+V1NTIFByb3h5IE5hbWU8L2xhYmVsPlxyXG4gICAgICAgIDwvRmxvYXRMYWJlbD5cclxuXHJcbiAgICAgICAgPEZsb2F0TGFiZWw+XHJcbiAgICAgICAgICA8SW5wdXROdW1iZXJcclxuICAgICAgICAgICAgaWQ9XCJ3c3NQb3J0XCJcclxuICAgICAgICAgICAgdi1tb2RlbD1cImZvcm0ud3NzUG9ydFwiXHJcbiAgICAgICAgICAgIDptaW49XCIxXCJcclxuICAgICAgICAgICAgOm1heD1cIjY1NTM1XCJcclxuICAgICAgICAgICAgY2xhc3M9XCJ3LWZ1bGxcIlxyXG4gICAgICAgICAgICA6aW52YWxpZD1cIiFpc1ZhbGlkUG9ydChmb3JtLndzc1BvcnQpXCJcclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8bGFiZWwgZm9yPVwid3NzUG9ydFwiPldTUyBQcm94eSBQb3J0PC9sYWJlbD5cclxuICAgICAgICA8L0Zsb2F0TGFiZWw+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPE1lc3NhZ2VcclxuICAgICAgICB2LWlmPVwiZXJyb3JcIlxyXG4gICAgICAgIHNldmVyaXR5PVwiZXJyb3JcIlxyXG4gICAgICAgIDpjbG9zYWJsZT1cInRydWVcIlxyXG4gICAgICAgIEBjbG9zZT1cImVycm9yID0gbnVsbFwiXHJcbiAgICAgID5cclxuICAgICAgICB7eyBlcnJvciB9fVxyXG4gICAgICA8L01lc3NhZ2U+XHJcblxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWVuZCBnYXAtMiBwdC00XCI+XHJcbiAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICBsYWJlbD1cIkNhbmNlbGFyXCJcclxuICAgICAgICAgIHNldmVyaXR5PVwic2Vjb25kYXJ5XCJcclxuICAgICAgICAgIEBjbGljaz1cImhhbmRsZUNhbmNlbFwiXHJcbiAgICAgICAgLz5cclxuICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgICAgIGxhYmVsPVwiUmVzdGF1cmFyIERlZmF1bHRzXCJcclxuICAgICAgICAgIHNldmVyaXR5PVwiaGVscFwiXHJcbiAgICAgICAgICBAY2xpY2s9XCJoYW5kbGVSZXNldERlZmF1bHRzXCJcclxuICAgICAgICAvPlxyXG4gICAgICAgIDxCdXR0b25cclxuICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgbGFiZWw9XCJHdWFyZGFyXCJcclxuICAgICAgICAgIDpkaXNhYmxlZD1cIiFpc0Zvcm1WYWxpZFwiXHJcbiAgICAgICAgLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Zvcm0+XHJcbiAgPC9CYXNlTW9kYWw+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0IHNldHVwIGxhbmc9XCJ0c1wiPlxyXG5pbXBvcnQgeyByZWYsIGNvbXB1dGVkLCB3YXRjaCB9IGZyb20gJ3Z1ZSdcclxuaW1wb3J0IHsgdXNlU2lwU3RvcmUgfSBmcm9tICcuL1NpcFN0b3JlJ1xyXG5pbXBvcnQgRmxvYXRMYWJlbCBmcm9tICdwcmltZXZ1ZS9mbG9hdGxhYmVsJ1xyXG5pbXBvcnQgSW5wdXRUZXh0IGZyb20gJ3ByaW1ldnVlL2lucHV0dGV4dCdcclxuaW1wb3J0IElucHV0TnVtYmVyIGZyb20gJ3ByaW1ldnVlL2lucHV0bnVtYmVyJ1xyXG5pbXBvcnQgQnV0dG9uIGZyb20gJ3ByaW1ldnVlL2J1dHRvbidcclxuaW1wb3J0IE1lc3NhZ2UgZnJvbSAncHJpbWV2dWUvbWVzc2FnZSdcclxuaW1wb3J0IEJhc2VNb2RhbCBmcm9tICdAL2NvcmUvcHJlc2VudGF0aW9uL2NvbXBvbmVudHMvQmFzZU1vZGFsLnZ1ZSdcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgaXNPcGVuOiBib29sZWFuXHJcbn1cclxuXHJcbmludGVyZmFjZSBFbWl0cyB7XHJcbiAgKGU6ICdjbG9zZScpOiB2b2lkXHJcbiAgKGU6ICdzYXZlZCcpOiB2b2lkXHJcbn1cclxuXHJcbmNvbnN0IHByb3BzID0gZGVmaW5lUHJvcHM8UHJvcHM+KClcclxuY29uc3QgZW1pdCA9IGRlZmluZUVtaXRzPEVtaXRzPigpXHJcblxyXG5jb25zdCBzaXBTdG9yZSA9IHVzZVNpcFN0b3JlKClcclxuY29uc3QgZXJyb3IgPSByZWY8c3RyaW5nIHwgbnVsbD4obnVsbClcclxuXHJcblxyXG5cclxuY29uc3QgZm9ybSA9IHJlZih7XHJcbiAgc2lwRG9tYWluOiBzaXBTdG9yZS5zaXBDb25maWcuZG9tYWluLFxyXG4gIHdzc1Byb3h5OiBzaXBTdG9yZS5zaXBDb25maWcuc2VydmVyLnJlcGxhY2UoL153c3M6XFwvXFwvLywgJycpLnJlcGxhY2UoLzpcXGQrJC8sICcnKSxcclxuICB3c3NQb3J0OiBwYXJzZUludChzaXBTdG9yZS5zaXBDb25maWcuc2VydmVyLnJlcGxhY2UoL153c3M6XFwvXFwvLio6LywgJycpKSB8fCBERUZBVUxUX0NPTkZJRy53c3NQb3J0XHJcbn0pXHJcblxyXG4vLyBWYWxpZGFjaW9uZXNcclxuY29uc3QgaXNWYWxpZERvbWFpbiA9IChkb21haW46IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xyXG4gIGlmICghZG9tYWluKSByZXR1cm4gZmFsc2VcclxuICBjb25zdCBkb21haW5SZWdleCA9IC9eW2EtekEtWjAtOV1bYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XT8oXFwuW2EtekEtWjAtOV1bYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XT8pKiQvXHJcbiAgcmV0dXJuIGRvbWFpblJlZ2V4LnRlc3QoZG9tYWluKVxyXG59XHJcblxyXG5jb25zdCBpc1ZhbGlkSG9zdCA9IChob3N0OiBzdHJpbmcpOiBib29sZWFuID0+IHtcclxuICBpZiAoIWhvc3QpIHJldHVybiBmYWxzZVxyXG4gIC8vIEFjZXB0YSB0YW50byBJUCBjb21vIGhvc3RuYW1lXHJcbiAgY29uc3QgaXBSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pJC9cclxuICBjb25zdCBob3N0bmFtZVJlZ2V4ID0gL15bYS16QS1aMC05XVthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldPyhcXC5bYS16QS1aMC05XVthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldPykqJC9cclxuICByZXR1cm4gaXBSZWdleC50ZXN0KGhvc3QpIHx8IGhvc3RuYW1lUmVnZXgudGVzdChob3N0KVxyXG59XHJcblxyXG5jb25zdCBpc1ZhbGlkUG9ydCA9IChwb3J0OiBudW1iZXIgfCBudWxsKTogYm9vbGVhbiA9PiB7XHJcbiAgcmV0dXJuIHBvcnQgIT09IG51bGwgJiYgcG9ydCA+PSAxICYmIHBvcnQgPD0gNjU1MzVcclxufVxyXG5cclxuY29uc3QgaXNGb3JtVmFsaWQgPSBjb21wdXRlZCgoKSA9PiB7XHJcbiAgcmV0dXJuIChcclxuICAgIGlzVmFsaWREb21haW4oZm9ybS52YWx1ZS5zaXBEb21haW4pICYmXHJcbiAgICBpc1ZhbGlkSG9zdChmb3JtLnZhbHVlLndzc1Byb3h5KSAmJlxyXG4gICAgaXNWYWxpZFBvcnQoZm9ybS52YWx1ZS53c3NQb3J0KVxyXG4gIClcclxufSlcclxuXHJcbmNvbnN0IGhhbmRsZVNhdmUgPSAoKSA9PiB7XHJcbiAgaWYgKCFpc0Zvcm1WYWxpZC52YWx1ZSkge1xyXG4gICAgZXJyb3IudmFsdWUgPSAnUG9yIGZhdm9yLCBjb3JyaWdlIGxvcyBjYW1wb3MgbWFyY2Fkb3MgZW4gcm9qbydcclxuICAgIHJldHVyblxyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIHNpcFN0b3JlLnVwZGF0ZUFkdmFuY2VkQ29uZmlnKHtcclxuICAgICAgZG9tYWluOiBmb3JtLnZhbHVlLnNpcERvbWFpbixcclxuICAgICAgc2VydmVyOiBgd3NzOi8vJHtmb3JtLnZhbHVlLndzc1Byb3h5fToke2Zvcm0udmFsdWUud3NzUG9ydH1gLFxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgZW1pdCgnc2F2ZWQnKVxyXG4gICAgZW1pdCgnY2xvc2UnKVxyXG4gIH0gY2F0Y2gge1xyXG4gICAgZXJyb3IudmFsdWUgPSAnRXJyb3IgYWwgZ3VhcmRhciBsYSBjb25maWd1cmFjacOzbidcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGhhbmRsZUNhbmNlbCA9ICgpID0+IHtcclxuICBmb3JtLnZhbHVlID0ge1xyXG4gICAgc2lwRG9tYWluOiBzaXBTdG9yZS5zaXBDb25maWcuZG9tYWluLFxyXG4gICAgd3NzUHJveHk6IHNpcFN0b3JlLnNpcENvbmZpZy5zZXJ2ZXIucmVwbGFjZSgvXndzczpcXC9cXC8vLCAnJykucmVwbGFjZSgvOlxcZCskLywgJycpLFxyXG4gICAgd3NzUG9ydDogcGFyc2VJbnQoc2lwU3RvcmUuc2lwQ29uZmlnLnNlcnZlci5yZXBsYWNlKC9ed3NzOlxcL1xcLy4qOi8sICcnKSkgfHwgREVGQVVMVF9DT05GSUcud3NzUG9ydFxyXG4gIH1cclxuICBlcnJvci52YWx1ZSA9IG51bGxcclxuICBlbWl0KCdjbG9zZScpXHJcbn1cclxuXHJcbmNvbnN0IGhhbmRsZVJlc2V0RGVmYXVsdHMgPSAoKSA9PiB7XHJcbiAgZm9ybS52YWx1ZSA9IHsgLi4uREVGQVVMVF9DT05GSUcgfVxyXG4gIGVycm9yLnZhbHVlID0gbnVsbFxyXG59XHJcblxyXG4vLyBSZXNldGVhciBlbCBmb3JtdWxhcmlvIGN1YW5kbyBzZSBhYnJlIGVsIG1vZGFsXHJcbndhdGNoKCgpID0+IHByb3BzLmlzT3BlbiwgKGlzT3BlbikgPT4ge1xyXG4gIGlmIChpc09wZW4pIHtcclxuICAgIGZvcm0udmFsdWUgPSB7XHJcbiAgICAgIHNpcERvbWFpbjogc2lwU3RvcmUuc2lwQ29uZmlnLmRvbWFpbixcclxuICAgICAgd3NzUHJveHk6IHNpcFN0b3JlLnNpcENvbmZpZy5zZXJ2ZXIucmVwbGFjZSgvXndzczpcXC9cXC8vLCAnJykucmVwbGFjZSgvOlxcZCskLywgJycpLFxyXG4gICAgICB3c3NQb3J0OiBwYXJzZUludChzaXBTdG9yZS5zaXBDb25maWcuc2VydmVyLnJlcGxhY2UoL153c3M6XFwvXFwvLio6LywgJycpKSB8fCBERUZBVUxUX0NPTkZJRy53c3NQb3J0XHJcbiAgICB9XHJcbiAgICBlcnJvci52YWx1ZSA9IG51bGxcclxuICB9XHJcbn0pXHJcbjwvc2NyaXB0PiJdLCJmaWxlIjoiQzovcmVzcG9zL0FsbWFQaG9uZS9zcmMvY29tcG9uZW50cy9sb2dpbi9BZHZhbmNlZE9wdGlvbnNNb2RhbC52dWUifQ==